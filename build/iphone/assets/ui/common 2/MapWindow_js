function MapWindow(e,t){t.trackScreen(e);for(var i=new Feed,o=Ti.UI.createView({backgroundColor:"#ffffff",navBarHidden:!0}),a=new GetFeed(i.iowaCityFeed()),n=[],r=a[0].latitude,l=a[0].longitude,d=0;d<=a.length-1;d++)n.push(Map.createAnnotation({latitude:a[d].latitude,longitude:a[d].longitude,title:a[d].company,subtitle:a[d].street,pincolor:Map.ANNOTATION_RED,animate:!0}));var c=Map.createView({mapType:Map.NORMAL_TYPE,region:{latitude:n[0].latitude,longitude:n[0].longitude,latitudeDelta:.01,longitudeDelta:.01},animate:!0,regionFit:!0,userLocation:!1,height:200,annotations:n,top:0}),s=Ti.UI.createButton({title:"Get Route",width:80,height:30,backgroundColor:"#66CCFF",borderRadius:5,borderWidth:1,bottom:5,left:5,font:{fontFamily:"Helvetica",fontSize:14,fontWeight:"bold"}});c.add(s),s.addEventListener("click",function(){Ti.Network.online?(Ti.Geolocation.purpose="Receive User Location",Titanium.Geolocation.getCurrentPosition(function(e){if(!e.success||e.error)return void alert("Could not find the device location");var t=parseFloat(e.coords.longitude,10).toFixed(5),i=parseFloat(e.coords.latitude,10).toFixed(5),o="http://maps.google.com/maps?saddr="+i+","+t+"&daddr="+r+","+l;new WebView(o)})):alert("Internet connection is required to use localization features")});var u=Ti.UI.createView({backgroundColor:"#e2e2e2",height:70,top:200}),g=Ti.UI.createLabel({text:"UI Alumni Association members have".concat("\nan array of available to them. Use your member benefit card at any of these locations."),textAlign:"left",left:10,width:300,top:10,font:{fontFamily:"HelveticaNeue-Light",fontSize:14,fontWeight:"bold"}});u.add(g);var h=Ti.UI.createLabel({text:"benefits",textAlign:"left",left:236.5,top:10,color:"blue",font:{fontFamily:"HelveticaNeue-Light",fontSize:14,fontWeight:"bold"}});h.addEventListener("click",function(){new WebView("http://iowalum.com/membership/benefits.cfm"),t.trackEvent({category:"Benefits",action:"click",label:"Members Benefits' Website",value:1})}),u.add(h);for(var m=Ti.UI.createTableView({height:"auto",top:270}),f=[],d=0;d<=a.length-1;d++){if(d%2==0)var w=Ti.UI.createTableViewRow({company:a[d].company,latitude:a[d].latitude,longitude:a[d].longitude,height:"auto",bottom:10});else var w=Ti.UI.createTableViewRow({company:a[d].company,latitude:a[d].latitude,longitude:a[d].longitude,height:"auto",backgroundColor:"#cccccc",bottom:10});var p=Ti.UI.createLabel({text:a[d].company,textAlign:"left",height:20,top:10,left:10,font:{fontFamily:"Helvetica-Bold",fontSize:16,fontWeight:"normal"}}),b=Ti.UI.createLabel({text:a[d].discount,textAlign:"left",left:10,top:31,font:{fontFamily:"HelveticaNeue-Light",fontSize:12,fontWeight:"bold"}});w.add(p),w.add(b),f.push(w)}m.setData(f),o.add(c),o.add(u),o.add(m),m.addEventListener("click",function(e){c.setLocation({latitude:e.row.latitude,longitude:e.row.longitude,animate:!0,latitudeDelta:.01,longitudeDelta:.01}),c.selectAnnotation(n[e.index]),t.trackEvent({category:"Benefits",action:"click",label:n[e.index].title,value:1}),r=e.row.latitude,l=e.row.longitude});var T=new NavigateWindow("Iowa City Benefits",o);return T}var GetFeed=require("ui/common/GetFeed"),ApplicationWindow=require("ui/common/ApplicationWindow"),NavigateWindow=require("ui/common/NavigateWindow"),WebView=require("ui/common/WebView"),Feed=require("ui/common/Feed"),Map=require("ti.map");module.exports=MapWindow;