function Post(e){var t=convertUTCDateToLocalDate(new Date(e.startDate),e.timeZone),i=formatDate(t),o=convertUTCDateToLocalDate(new Date(e.endDate),e.timeZone),a=formatDate(o),n=(new Date).toString().match(/\(([A-Za-z\s].*)\)/)[1],r=i+(a!=i?" - "+a:"")+" ("+n+")";(isNaN(t.getHours())||1==e.useTimeInputField||1==e.allDay)&&(r=e.snl),this.title=new Description(e.title).getDescription(),this.snl=r,this.place=e.place,this.description=new Description(e.description).getDescription(),this.pubDate=e.pubDate,this.postDate=e.postDate,this.allDay=e.allDay,this.startDate=t,this.endDate=o,this.hlink=e.hlink,this.image=new Description(e.description).getImage(),this.url=e.link,this.imageheight=null!=this.image?getImageHeight(this.image):null}function getImageHeight(e){var t=Ti.UI.createImageView({image:e,width:"auto",height:"auto",hires:!0});new CachedImageView("imageDirectoryName",e,t);var i=t.toImage().height/t.toImage().width;return Math.floor(300*i)}function convertUTCDateToLocalDate(e,t){var i,o,a=5;if(""!=t&&void 0!=t)switch(t.toString()){case"PST":a=8;break;case"PDT":a=7;break;case"MST":a=7;break;case"CST":a=6;break;case"MDT":a=6;break;case"EDT":a=4}return i=new Date(e.getTime()+36e5*a),o=new Date(i.getTime()-6e4*e.getTimezoneOffset())}function formatDate(e){var t=new Date(e),i=t.getHours(),o=t.getMinutes(),a=t.getSeconds(),n="AM",r=i;r>=12&&(r=i-12,n="PM"),0==r&&(r=12),o=10>o?"0"+o:o,a=10>a?"0"+a:a;var l=(new RegExp("0?"+i+":"+o+":"+a),r+":"+o);return l+=" "+n}var Description=require("ui/common/Description"),CachedImageView=require("ui/common/CachedImageView");module.exports=Post;