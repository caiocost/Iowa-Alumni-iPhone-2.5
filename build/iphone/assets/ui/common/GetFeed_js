function GetFeed(e){var t=[];xmlDoc=loadXMLDoc(e);var i=xmlDoc.getElementsByTagName("item"),n=i.item(o);if(e==Feeds.articleOfTheWeekFeed())t.push({title:getRssText(n,"title"),url:getRssText(n,"link"),image:getRssText(n,"image"),description:getRssText(n,"description"),pubDate:getRssText(n,"pubDate")});else if(e==Feeds.todayDateFeed())t.push({date:getRssText(n,"date")});else if(e==Feeds.passwordFeed())t.push({pass:getRssText(n,"pass"),pass2:getRssText(n,"pass2")});else for(var o=0;o<i.length;o++){var n=i.item(o);if(e==Feeds.gameWatchFeed())t.push({state:getRssText(n,"state"),club:getRssText(n,"club"),place:getRssText(n,"place"),phone:getRssText(n,"phone"),latitude:getRssText(n,"latitude"),longitude:getRssText(n,"longitude"),street:getRssText(n,"street")});else if(e==Feeds.nationalDiscountFeed())t.push({title:getRssText(n,"title"),link:getRssText(n,"link"),description:getRssText(n,"description")});else if("http://www.iowalum.com/mobile-app/events_category_feed.cfm"==e)t.push({category:getRssText(n,"category")});else if(e==Feeds.mobileAlertsFeed())t.push({title:getRssText(n,"title"),header:getRssText(n,"header"),url:getRssText(n,"link"),image:getRssText(n,"image"),description:getRssText(n,"description"),pubDate:getRssText(n,"pubDate")});else if(e==Feeds.staticaAdFeed())t.push({ad:getRssText(n,"ad"),adUrl:getRssText(n,"adUrl")});else if(e==Feeds.mobileAlertsFeed())t.push({title:getRssText(n,"title"),header:getRssText(n,"header"),url:getRssText(n,"link"),image:getRssText(n,"image"),description:getRssText(n,"description"),pubDate:getRssText(n,"pubDate")});else if(e==Feeds.todayEventsFeed())t.push({snl:getRssText(n,"snl"),place:getRssText(n,"place"),title:getRssText(n,"title"),allDay:getRssText(n,"allDay"),url:getRssText(n,"link"),description:getRssText(n,"description"),pubDate:getRssText(n,"pubDate"),startDate:getRssText(n,"startDate"),endDate:getRssText(n,"endDate")});else if(e==Feeds.eventsFeed()||e==Feeds.eventsSportsCategoryFeed()||e==Feeds.eventsUIAACategoryFeed()||e==Feeds.eventsClubsCategoryFeed()||e==Feeds.eventsStudentCategoryFeed()){var a=getRssText(n,"timeZone"),r=(new Date).toString().match(/\(([A-Za-z\s].*)\)/)[1],l=convertUTCDateToLocalDate(new Date(getRssText(n,"startDate")),a),d=formatDate(l),s=convertUTCDateToLocalDate(new Date(getRssText(n,"endDate")),a),c=formatDate(s),u=d+(c!=d?" - "+c:"")+" ("+r+")";(isNaN(l.getHours())||1==getRssText(n,"useTimeInputField")||1==getRssText(n,"allDay"))&&(u=getRssText(n,"snl")),t.push({snl:u,useTimeInputField:getRssText(n,"useTimeInputField"),place:getRssText(n,"place"),title:getRssText(n,"title"),allDay:getRssText(n,"allDay"),link:getRssText(n,"link"),hlink:getRssText(n,"hlink"),description:getRssText(n,"description"),pubDate:getRssText(n,"pubDate"),startDate:getRssText(n,"startDate"),endDate:getRssText(n,"endDate"),timeZone:a,category:getRssText(n,"category")})}else t.push(e==Feeds.clubsFeed()?{state:getRssText(n,"state"),leader:getRssText(n,"leader"),city:getRssText(n,"city"),web:getRssText(n,"web"),email:getRssText(n,"email"),phone:getRssText(n,"phone")}:e==Feeds.adFeed()?{ad:getRssText(n,"ad"),link:getRssText(n,"link")}:e==Feeds.sliderImagesFeed()?{url:getRssText(n,"url")}:{company:getRssText(n,"company"),discount:getRssText(n,"discount"),latitude:getRssText(n,"latitude"),longitude:getRssText(n,"longitude"),street:getRssText(n,"street")})}return t}function loadXMLDoc(e){var t=Titanium.Network.createHTTPClient();return t.open("GET",e,!1),t.send(),t.responseXML}function convertUTCDateToLocalDate(e,t){{var i,n,o=5;new Date}if(""!=t&&void 0!=t){var a=t.toString();"PST"==a||"AKDT"==a?o=8:"PDT"==a||"MST"==a?o=7:"CST"==a?o=6:"EDT"==a?o=4:"EST"==a?o=5:"AKST"==a||"HADT"==a?o=9:"HAST"==a&&(o=10)}return i=new Date(e.getTime()+36e5*o),n=new Date(i.getTime()-6e4*e.getTimezoneOffset())}function formatDate(e){var t=new Date(e),i=t.getHours(),n=t.getMinutes(),o=t.getSeconds(),a="AM",r=i;r>=12&&(r=i-12,a="PM"),0==r&&(r=12),n=10>n?"0"+n:n,o=10>o?"0"+o:o;var l=(new RegExp("0?"+i+":"+n+":"+o),r+":"+n);return l+=" "+a}var Feed=require("ui/common/Feed"),Feeds=new Feed,osname=Ti.Platform.osname,RSS_URL="mobileweb"===osname?"/feed.xml":Feeds.magazineFeed(),getRssText=function(e,t){return"mobileweb"===osname?e.getElementsByTagName(t).item(0).textContent:e.getElementsByTagName(t).item(0).text};module.exports=GetFeed;